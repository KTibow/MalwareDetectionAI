import requests, shutil, functools

def save_resp_to_file(resp: requests.Request, filename: str):
    resp.raw.read = functools.partial(resp.raw.read, decode_content=True)
    with open(filename, "wb") as f:
        shutil.copyfileobj(resp.raw, f)



skyclient_data = requests.get(
    "https://raw.githubusercontent.com/nacrt/SkyblockClient-REPO/main/files/mods.json"
)
data = skyclient_data.json()
for i in data:
    if "url" in i and "file" in i:
        jar = requests.get(
            i["url"], allow_redirects=True, stream=True, headers={
                "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:101.0) Gecko/20100101 Firefox/101.0"
            }
        )
        save_resp_to_file(jar, "./not rats/" + i["file"])
